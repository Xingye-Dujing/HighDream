<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HighDream Word</title>
    <link rel="stylesheet" href="../static/fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="/static/style.css" />
    <link rel="stylesheet" href="/static/word_editor.css" />
    <script
      id="MathJax-script"
      async
      src="../static/mathjax/es5/tex-chtml-full.js"
    ></script>
    <script src="/static/word_editor.js"></script>
  </head>

  <body>
    <div id="math-background">
      <div class="math-bg-element" style="top: 10%; left: 5%">∫</div>
      <div class="math-bg-element" style="top: 20%; right: 8%">∑</div>
      <div class="math-bg-element" style="top: 40%; left: 7%">∂</div>
      <div class="math-bg-element" style="top: 60%; right: 10%">π</div>
      <div class="math-bg-element" style="top: 80%; left: 12%">∞</div>
      <div class="math-bg-element" style="bottom: 15%; right: 5%">∇</div>
    </div>

    <div id="header">
      <h1><i></i>HighDream Word</h1>
      <div id="header-controls">
        <a href="/">
          <button class="header-btn" id="homeBtn" title="首页">
            <i class="fas fa-circle"></i>
          </button>
        </a>

        <button class="header-btn" id="saveJsonBtn" title="保存为 JSON">
          <i class="fas fa-file-code"></i>
        </button>
        <button class="header-btn" id="loadBtn" title="加载文档">
          <i class="fas fa-folder-open"></i>
        </button>
        <button class="header-btn" id="toggleKeyboardBtn" title="切换虚拟键盘">
          <i class="fas fa-keyboard"></i>
        </button>
        <button class="header-btn" id="toggleThemeBtn" title="切换主题">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </div>

    <div id="toolbar">
      <div class="toolbar-section">
        <button class="toolbar-button" id="addTextBtn" title="添加文本段落">
          <i class="fas fa-font"></i><span>文本</span>
        </button>
        <button class="toolbar-button" id="addSymPyBtn" title="添加 SymPy 代码">
          <i class="fas fa-code"></i><span>SymPy</span>
        </button>
        <button class="toolbar-button" id="addLatexBtn" title="添加 LaTeX 公式">
          <i class="fas fa-compress-alt"></i><span>LaTeX</span>
        </button>
      </div>

      <div class="toolbar-separator"></div>

      <div class="toolbar-section">
        <button class="toolbar-button" id="boldBtn" title="粗体">
          <i class="fas fa-bold"></i>
        </button>
        <button class="toolbar-button" id="italicBtn" title="斜体">
          <i class="fas fa-italic"></i>
        </button>
      </div>

      <div class="toolbar-separator"></div>

      <div class="toolbar-section">
        <button class="toolbar-button" id="integralBtn" title="积分">
          <span>\int</span>
        </button>
        <button class="toolbar-button" id="sumBtn" title="求和">
          <span>\sum</span>
        </button>
        <button class="toolbar-button" id="limitBtn" title="极限">
          <span>\lim</span>
        </button>
        <button class="toolbar-button" id="diffBtn" title="求导">
          <span>d/dx</span>
        </button>
      </div>

      <div class="toolbar-separator"></div>

      <div class="toolbar-section">
        <button class="toolbar-button" id="sympyDiffBtn" title="SymPy 求导模板">
          <span>diff()</span>
        </button>
        <button
          class="toolbar-button"
          id="sympyIntegralBtn"
          title="SymPy 积分模板"
        >
          <span>integrate()</span>
        </button>
        <button
          class="toolbar-button"
          id="sympyLimitBtn"
          title="SymPy 极限模板"
        >
          <span>limit()</span>
        </button>
        <button
          class="toolbar-button"
          id="sympySimplifyBtn"
          title="SymPy 简化模板"
        >
          <span>simplify()</span>
        </button>
      </div>

      <div class="toolbar-separator"></div>

      <div class="toolbar-section">
        <button class="toolbar-button" id="fracBtn" title="分数">
          <span>\frac</span>
        </button>
        <button class="toolbar-button" id="sqrtBtn" title="平方根">
          <span>\sqrt</span>
        </button>
        <button class="toolbar-button" id="powerBtn" title="幂">
          <span>^{}</span>
        </button>
        <button class="toolbar-button" id="matrixBtn" title="矩阵">
          <span>[]</span>
        </button>
      </div>

      <div class="toolbar-separator"></div>

      <div class="toolbar-section">
        <button
          class="toolbar-button"
          id="runAllBtn"
          title="运行所有 SymPy 代码"
        >
          <i class="fas fa-play"></i><span>运行全部</span>
        </button>

        <button class="toolbar-button" id="moveUpBtn" title="上移当前段落">
          <i class="fas fa-arrow-up"></i><span>上移</span>
        </button>

        <button class="toolbar-button" id="moveDownBtn" title="下移当前段落">
          <i class="fas fa-arrow-down"></i><span>下移</span>
        </button>

        <button class="toolbar-button" id="deleteBtn" title="删除当前段落">
          <i class="fas fa-trash"></i><span>删除</span>
        </button>

        <button
          class="toolbar-button"
          id="toggleMinimalBtn"
          title="切换最简模式"
        >
          <i class="fas fa-eye-slash"></i><span>切换最简模式</span>
        </button>
      </div>
    </div>

    <div id="document-container">
      <div id="document">
        <div id="a4-page" class="a4-page">
          <div id="content-area">
            <!-- Paragraphs will be dynamically generated here -->
          </div>
        </div>
      </div>
    </div>

    <div id="math-keyboard" class="keyboard-hidden">
      <div class="keyboard-header">
        <span>数学符号键盘</span>
        <button id="closeKeyboardBtn" class="keyboard-close-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="keyboard-content">
        <div class="keyboard-row">
          <button class="keyboard-key" data-value="x">x</button>
          <button class="keyboard-key" data-value="y">y</button>
          <button class="keyboard-key" data-value="z">z</button>
          <button class="keyboard-key" data-value="t">t</button>
          <button class="keyboard-key" data-value="n">n</button>
        </div>
        <div class="keyboard-row">
          <button class="keyboard-key" data-value="a">a</button>
          <button class="keyboard-key" data-value="b">b</button>
          <button class="keyboard-key" data-value="c">c</button>
          <button class="keyboard-key" data-value="pi">π</button>
          <button class="keyboard-key" data-value="E">e</button>
        </div>
        <div class="keyboard-row">
          <button class="keyboard-key" data-value="**">幂</button>
          <button class="keyboard-key" data-value="sqrt()">平方根</button>
          <button class="keyboard-key" data-value="()">括号</button>
          <button class="keyboard-key" data-value="[]">方括号</button>
        </div>
        <div class="keyboard-row">
          <button class="keyboard-key" data-value="sin()">sin</button>
          <button class="keyboard-key" data-value="cos()">cos</button>
          <button class="keyboard-key" data-value="tan()">tan</button>
          <button class="keyboard-key" data-value="log()">log</button>
          <button class="keyboard-key" data-value="exp()">exp</button>
        </div>
        <div class="keyboard-row">
          <button class="keyboard-key" data-value="+">+</button>
          <button class="keyboard-key" data-value="-">-</button>
          <button class="keyboard-key" data-value="*">*</button>
          <button class="keyboard-key" data-value="/">/</button>
          <button class="keyboard-key" data-value="=">=</button>
        </div>
      </div>
    </div>

    <div class="notification" id="notification">
      <div class="notification-content">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text"></span>
      </div>
    </div>

    <input type="file" id="fileInput" accept=".json" style="display: none" />

    <div
      id="helpful-area"
      style="display: none; width: 100%; height: 320px"
    ></div>
  </body>
</html>
